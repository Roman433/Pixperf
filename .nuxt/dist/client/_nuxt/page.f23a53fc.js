import{h as u,K as y,f,u as d,g as p,S as g,n as m,i as v,T as A,R as k,j as K,k as _,r as T}from"./entry.bc84ea7d.js";function c(e){return e!==null&&typeof e=="object"}function s(e,o,t=".",n){if(!c(o))return s(e,{},t,n);const r=Object.assign({},o);for(const a in e){if(a==="__proto__"||a==="constructor")continue;const i=e[a];i!=null&&(n&&n(r,a,i,t)||(Array.isArray(i)&&Array.isArray(r[a])?r[a]=[...i,...r[a]]:c(i)&&c(r[a])?r[a]=s(i,r[a],(t?`${t}.`:"")+a.toString(),n):r[a]=i))}return r}function h(e){return(...o)=>o.reduce((t,n)=>s(t,n,"",e),{})}const C=h(),j=(e,o)=>o.path.replace(/(:\w+)\([^)]+\)/g,"$1").replace(/(:\w+)[?+*]/g,"$1").replace(/:\w+/g,t=>{var n;return((n=e.params[t.slice(1)])==null?void 0:n.toString())||""}),w=(e,o)=>{const t=e.route.matched.find(r=>{var a;return((a=r.components)==null?void 0:a.default)===e.Component.type}),n=o??(t==null?void 0:t.meta.key)??(t&&j(e.route,t));return typeof n=="function"?n(e.route):n},R=(e,o)=>({default:()=>e?u(y,e===!0?{}:e,o):o}),S=f({name:"FragmentWrapper",setup(e,{slots:o}){return()=>{var t;return(t=o.default)==null?void 0:t.call(o)}}}),x=(e,o,t)=>({default:()=>o?u(e,o===!0?{}:o,t):u(S,{},t)}),L=f({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(e,{attrs:o}){const t=d();return()=>u(k,{name:e.name,route:e.route,...o},{default:n=>{if(!n.Component)return;const r=w(n,e.pageKey),a=t.deferHydration(),i=!!(e.transition??n.route.meta.pageTransition??p),l=i&&b([e.transition,n.route.meta.pageTransition,p,{onAfterLeave:()=>{t.callHook("page:transition:finish",n.Component)}}].filter(Boolean));return x(A,i&&l,R(e.keepalive??n.route.meta.keepalive??v,u(g,{onPending:()=>t.callHook("page:start",n.Component),onResolve:()=>{m(()=>t.callHook("page:finish",n.Component).finally(a))}},{default:()=>u(B,{key:r,routeProps:n,pageKey:r,hasTransition:i})}))).default()}})}});function H(e){return Array.isArray(e)?e:e?[e]:[]}function b(e){const o=e.map(t=>({...t,onAfterLeave:H(t.onAfterLeave)}));return C(...o)}const B=f({name:"RouteProvider",props:["routeProps","pageKey","hasTransition"],setup(e){const o=e.pageKey,t=e.routeProps.route,n={};for(const r in e.routeProps.route)n[r]=K(()=>o===e.pageKey?e.routeProps.route[r]:t[r]);return _("_route",T(n)),()=>u(e.routeProps.Component)}});export{L as default};
